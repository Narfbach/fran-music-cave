<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set Admin</title>
    <style>
        body{background:#000;color:#999;font-family:'Courier New',monospace;padding:2rem;max-width:600px;margin:0 auto}
        button{background:#1a1a1a;color:#999;border:1px solid #333;padding:1rem 2rem;font-family:'Courier New',monospace;cursor:pointer;margin-top:1rem}
        button:hover{background:#333}
        #status{margin-top:1rem;padding:1rem;background:#0a0a0a;border:1px solid #1a1a1a}
    </style>
</head>
<body>
    <h1>Set Admin Status</h1>
    <p>Click the button to set yourself as admin</p>
    <button onclick="setAdmin()">SET ME AS ADMIN</button>
    <div id="status"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, updateDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDSUwJP4x7gVE21K3fTs1iYGy_BXBXQZ2k",
            authDomain: "fran-music-cave.firebaseapp.com",
            projectId: "fran-music-cave",
            storageBucket: "fran-music-cave.firebasestorage.app",
            messagingSenderId: "824700903031",
            appId: "1:824700903031:web:d30a58a783fc98c738f3a7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.setAdmin = async function() {
            const user = auth.currentUser;
            if (!user) {
                document.getElementById('status').innerHTML = '❌ You must be logged in';
                return;
            }

            try {
                await updateDoc(doc(db, 'users', user.uid), {
                    isAdmin: true
                });
                document.getElementById('status').innerHTML = `✅ Success! ${user.email} is now an ADMIN<br><br>Refresh your profile page to see the changes.`;
            } catch (error) {
                document.getElementById('status').innerHTML = `❌ Error: ${error.message}`;
            }
        }

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('status').innerHTML = `Logged in as: ${user.email}`;
            } else {
                document.getElementById('status').innerHTML = '⚠️ Not logged in. <a href="auth.html" style="color:#666">Login first</a>';
            }
        });
    </script>
</body>
</html>
